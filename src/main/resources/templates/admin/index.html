<!DOCTYPE html>
<html lang="en">
    <div th:replace="admin/fragments/head :: head"></div>
    <body>
    	<div th:replace="admin/fragments/header :: header"></div>
    	<div id="layoutSidenav">
         	<div th:replace="admin/fragments/nav :: nav"></div>
            <div id="layoutSidenav_content">
                <main>
                    <div class="container-fluid px-4">
                        <h1 class="mt-4">Bienvenido, <span th:text="${session.usuario.nombre}"></span></h1>
                        <ol class="breadcrumb mb-4">
                            <li class="breadcrumb-item"><a href="index.html">Admininstración</a></li>
                        </ol>
                        
                        <div class="card text-white bg-danger mb-4" th:if="${!prodsPocoSotck.isEmpty()}">
						  <div class="card-header">Aviso productos con stock bajo</div>
						  <div class="card-body" th:each="prod : ${prodsPocoSotck}">

						    <p class="card-text" th:text="${'ProductoID: '}+${prod.id}+${' '}+${prod.nombre}+${' solo quedan '}+${prod.stock}+${' unidades.'}"></p>
						  </div>
						  <div class="card-footer d-flex align-items-center justify-content-between">
                              <a class="small text-white stretched-link" th:href="@{/admin/productos}">Ver productos</a>
                              <div class="small text-white"><svg class="svg-inline--fa fa-angle-right fa-w-8" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="angle-right" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 256 512" data-fa-i2svg=""><path fill="currentColor" d="M224.3 273l-136 136c-9.4 9.4-24.6 9.4-33.9 0l-22.6-22.6c-9.4-9.4-9.4-24.6 0-33.9l96.4-96.4-96.4-96.4c-9.4-9.4-9.4-24.6 0-33.9L54.3 103c9.4-9.4 24.6-9.4 33.9 0l136 136c9.5 9.4 9.5 24.6.1 34z"></path></svg><!-- <i class="fas fa-angle-right"></i> Font Awesome fontawesome.com --></div>
                          </div>
						</div>

                        <div class="card mb-4">
                        	<div class="card-header">
                                 <svg class="svg-inline--fa fa-chart-bar fa-w-16 me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-bar" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"></path></svg><!-- <i class="fas fa-chart-bar me-1"></i> Font Awesome fontawesome.com -->
                                 Datos de la tienda
                            </div>
                            <div class="card-body">
                                <div class="row g-2 d-flex item-box">
						            <div class="col-md-4 ">
						                <h5 class="text-primary"> Total de los pedidos de este més </h5>
						                <p class="display-2" th:text="${totalPeds} + ${' €'}"></p>
						            </div>
						
						            <div class="col-md-4 ">
						                <h5 class="text-primary"> Total de productos en la tienda: </h5>
						                <p class="display-2" th:text="${numUs}"></p>
						            </div>
						
						            <div class="col-md-4 ">
						                <h5 class="text-primary"> Total de usuarios registrados: </h5>
						                <p class="display-2" th:text="${numProds}"></p>
						            </div>
						        </div>
                            </div>
                        </div>
                        

                   		<div class="row">
                          	<div class="col-md-6">
                           		<div class="card mb-4">
                           			<div class="card-header text-primary">
		                                 <svg class="svg-inline--fa fa-chart-bar fa-w-16 me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-bar" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512" data-fa-i2svg=""><path fill="currentColor" d="M332.8 320h38.4c6.4 0 12.8-6.4 12.8-12.8V172.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v134.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V76.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v230.4c0 6.4 6.4 12.8 12.8 12.8zm-288 0h38.4c6.4 0 12.8-6.4 12.8-12.8v-70.4c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v70.4c0 6.4 6.4 12.8 12.8 12.8zm96 0h38.4c6.4 0 12.8-6.4 12.8-12.8V108.8c0-6.4-6.4-12.8-12.8-12.8h-38.4c-6.4 0-12.8 6.4-12.8 12.8v198.4c0 6.4 6.4 12.8 12.8 12.8zM496 384H64V80c0-8.84-7.16-16-16-16H16C7.16 64 0 71.16 0 80v336c0 17.67 14.33 32 32 32h464c8.84 0 16-7.16 16-16v-32c0-8.84-7.16-16-16-16z"></path></svg><!-- <i class="fas fa-chart-bar me-1"></i> Font Awesome fontawesome.com -->
		                                 <h5 class=" d-inline" > Ventas por més </h5>
		                            </div>
                            		<div class="card-body">
				                        <canvas id="bar" width="100" height="75"></canvas>
				                    </div>
                       			</div>   	
                          	</div>
		                            	
		                    <div class="col-md-6">
		                        <div class="card mb-4">
		                        	<div class="card-header text-primary">
                                        <svg class="svg-inline--fa fa-chart-pie fa-w-17 me-1" aria-hidden="true" focusable="false" data-prefix="fas" data-icon="chart-pie" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 544 512" data-fa-i2svg=""><path fill="currentColor" d="M527.79 288H290.5l158.03 158.03c6.04 6.04 15.98 6.53 22.19.68 38.7-36.46 65.32-85.61 73.13-140.86 1.34-9.46-6.51-17.85-16.06-17.85zm-15.83-64.8C503.72 103.74 408.26 8.28 288.8.04 279.68-.59 272 7.1 272 16.24V240h223.77c9.14 0 16.82-7.68 16.19-16.8zM224 288V50.71c0-9.55-8.39-17.4-17.84-16.06C86.99 51.49-4.1 155.6.14 280.37 4.5 408.51 114.83 513.59 243.03 511.98c50.4-.63 96.97-16.87 135.26-44.03 7.9-5.6 8.42-17.23 1.57-24.08L224 288z"></path></svg><!-- <i class="fas fa-chart-pie me-1"></i> Font Awesome fontawesome.com -->
                                        <h5 class=" d-inline" > Ventas este año por categoria </h5>
                                    </div>
                            		<div class="card-body text-center">
			                        		<span th:each="cat : ${nombresCat}">
			                        			<span th:text="${cat}"></span> 
			                        		</span>
		                        			<canvas id="YearChart" width="100" height="75"></canvas>
						                </div>
		                       		</div>   
		                       </div>
                       	</div>
                        	
		                <script>
		                	var CoolorsPaletteWidget = ["#61F4DE","#62E9E1","#63DDE4","#65D2E7","#66C7EA","#67BCED","#68B0F0","#69A5F3","#6A9AF6","#6C8FF9","#6D83FC","#6E78FF"]; 
							var dataList = [[${totalPdsY}]] ;
							var labelList = [[${mesesPdsY}]];
		                    var ctx = document.getElementById('bar').getContext('2d');
		                    
		                    var bar = new Chart(ctx, {
		                        type: 'bar',
		                        data: {
		                            labels: labelList,
		                            datasets: [{
		                                label: '€',
		                                data: dataList,
		                                backgroundColor: CoolorsPaletteWidget,
		                            }]
		                        },
		                       options: {}
		                    });
		                	
		                	var CoolorsPaletteWidget = ["#61F4DE","#63DDE4","#67BCED","#6D83FC"]; 
		                	var dataList = [[${totalPorCat}]] ;
	                        var ctx = document.getElementById('YearChart').getContext('2d');
	                        var YearChart = new Chart(ctx, {
	                            type: 'doughnut',
	                            data: {
	                                labels: [1,2,3,4],
	                                datasets: [{
	                                    label: '€',
	                                    data: dataList,
	                                    backgroundColor: CoolorsPaletteWidget,
	                                }]
	                            },
	                            options: {}
	                        });
                    </script>
                    </div>
                </main>
                
                <div th:replace="admin/fragments/footerYscripts :: footer"></div>
    
            </div>
            
        </div> <!-- cierre del contenido que se importa del archivo js/piezas/headerYnac.html -->
    </body>
</html>
